# Contributing to BIP39 Wallet Generator

Thank you for your interest in contributing to the BIP39 Wallet Generator! This document provides guidelines and information for contributors.

## üö® Security-First Contribution Guidelines

‚ö†Ô∏è **CRITICAL**: This project generates cryptocurrency wallets. All contributions must prioritize security and undergo thorough review. Never include real private keys, mnemonics, or sensitive data in contributions.

### Security Review Requirements
- **All cryptographic changes** require security expert review
- **Platform-specific implementations** must maintain security parity
- **Test contributions** must include security validation
- **Documentation changes** affecting security require careful review

## Table of Contents

- [Code of Conduct](#code-of-conduct)
- [Getting Started](#getting-started)
- [Development Setup](#development-setup)
- [Contribution Types](#contribution-types)
- [Development Workflow](#development-workflow)
- [Code Standards](#code-standards)
- [Testing Requirements](#testing-requirements)
- [Security Guidelines](#security-guidelines)
- [Platform-Specific Guidelines](#platform-specific-guidelines)
- [Documentation Standards](#documentation-standards)
- [Review Process](#review-process)

## Code of Conduct

This project adheres to a code of conduct that all contributors are expected to follow. Please read [CODE_OF_CONDUCT.md](CODE_OF_CONDUCT.md) before contributing.

### Key Principles
- **Respectful collaboration** in all interactions
- **Security-conscious development** practices
- **Inclusive environment** for all contributors
- **Professional communication** in issues and pull requests

## Getting Started

### Prerequisites

Before contributing, ensure you have:

1. **Platform Development Environment**
   - **Linux/macOS**: GCC/Clang, Make, libsecp256k1, OpenSSL
   - **Windows**: Visual Studio 2019/2022, CMake, vcpkg
   
2. **Development Tools**
   - Git for version control
   - Text editor or IDE (VS Code, Visual Studio, CLion)
   - Understanding of C++17 standards

3. **Cryptographic Knowledge**
   - Basic understanding of BIP39/BIP44 standards
   - Familiarity with cryptocurrency address generation
   - Awareness of cryptographic best practices

### First-Time Setup

```bash
# 1. Fork the repository on GitHub
# 2. Clone your fork
git clone https://github.com/YOUR_USERNAME/bip39-wallet-generator.git
cd bip39-wallet-generator

# 3. Add upstream remote
git remote add upstream https://github.com/ORIGINAL_OWNER/bip39-wallet-generator.git

# 4. Set up development environment
# Linux/macOS:
make install-deps-ubuntu  # or install-deps-macos
make
make test-all

# Windows:
# Follow WINDOWS_SETUP.md for detailed instructions
```

## Development Setup

### Linux/macOS Setup

```bash
# Install dependencies
sudo apt-get install libssl-dev libsecp256k1-dev build-essential  # Ubuntu
brew install openssl secp256k1  # macOS

# Install development tools
sudo apt-get install valgrind lcov cppcheck  # Ubuntu (optional)

# Build and test
make clean && make
make test-all
```

### Windows Setup

Follow the comprehensive [Windows Setup Guide](WINDOWS_SETUP.md) for detailed instructions.

```batch
# Quick setup with vcpkg
scripts\install_windows_deps.ps1
scripts\build_windows.bat
```

### IDE Configuration

#### Visual Studio Code
```json
// .vscode/settings.json
{
    "C_Cpp.default.cppStandard": "c++17",
    "C_Cpp.default.includePath": [
        "${workspaceFolder}",
        "${workspaceFolder}/windows"
    ]
}
```

#### Visual Studio (Windows)
- Open solution generated by CMake
- Set startup project to `wallet_generator`
- Configure debugging parameters in project properties

## Contribution Types

### 1. Bug Fixes
- **Security bugs**: Report privately first (see [SECURITY.md](SECURITY.md))
- **Functional bugs**: Create issue before submitting PR
- **Platform-specific issues**: Test on affected platform

### 2. Feature Enhancements
- **New network support**: Follow existing network implementation patterns
- **CLI improvements**: Maintain backwards compatibility
- **Performance optimizations**: Include benchmarks

### 3. Security Improvements
- **Cryptographic enhancements**: Require expert review
- **Memory security**: Test with Valgrind/similar tools
- **Input validation**: Include comprehensive test cases

### 4. Platform Support
- **Cross-platform compatibility**: Test on all supported platforms
- **Windows enhancements**: Maintain parity with Unix implementations
- **Build system improvements**: Support both Make and CMake

### 5. Testing and Quality
- **Test coverage improvements**: Aim for comprehensive coverage
- **Performance testing**: Include benchmarks and scalability tests
- **Security testing**: Validate cryptographic implementations

### 6. Documentation
- **User documentation**: Clear, accurate, and complete
- **Developer documentation**: Technical details and examples
- **Security documentation**: Highlight risks and best practices

## Development Workflow

### 1. Issue Creation

Before starting work:

```markdown
# For new features
- [ ] Create feature request issue
- [ ] Discuss approach with maintainers
- [ ] Get approval before implementation

# For bug fixes
- [ ] Create bug report with reproduction steps
- [ ] Confirm bug affects supported versions
- [ ] Propose solution approach
```

### 2. Branch Strategy

```bash
# Create feature branch from main
git checkout main
git pull upstream main
git checkout -b feature/your-feature-name

# For bug fixes
git checkout -b fix/issue-number-description

# For security fixes
git checkout -b security/brief-description
```

### 3. Development Process

```bash
# 1. Make changes following code standards
# 2. Test thoroughly on your platform
make test-all  # Linux/macOS
.\run_tests.bat --all  # Windows

# 3. Ensure cross-platform compatibility
# Test on multiple platforms if possible

# 4. Update documentation
# Include user-facing and technical documentation

# 5. Commit with clear messages
git add -A
git commit -m "type(scope): clear description of change"
```

### 4. Pre-submission Checklist

Before submitting a pull request:

- [ ] **Code compiles** on all target platforms
- [ ] **All tests pass** (automated and manual)
- [ ] **Security review** completed for crypto changes
- [ ] **Documentation updated** for user-facing changes
- [ ] **CHANGELOG.md updated** with notable changes
- [ ] **No sensitive data** included in commits
- [ ] **Code follows style guidelines**
- [ ] **Cross-platform testing** completed (if applicable)

## Code Standards

### C++ Style Guidelines

```cpp
// 1. Use C++17 features appropriately
class WalletGenerator {
private:
    // Member variables with descriptive names
    std::unique_ptr<secp256k1_context> ctx_;
    
public:
    // Clear function names and documentation
    /**
     * Generate wallet from seed for specified network
     * @param seed BIP39 seed bytes
     * @param network Network identifier  
     * @param customPath Optional custom derivation path
     * @return WalletInfo structure with generated keys and address
     */
    WalletInfo generateWallet(const std::vector<uint8_t>& seed, 
                            const std::string& network,
                            const std::string& customPath = "");
};
```

### Security-Critical Code Standards

```cpp
// 1. Clear sensitive data
void clearSensitiveData(std::vector<uint8_t>& sensitiveData) {
    std::fill(sensitiveData.begin(), sensitiveData.end(), 0);
    // Consider using secure memory clearing functions
}

// 2. Validate all inputs
bool validateMnemonic(const std::string& mnemonic) {
    if (mnemonic.empty()) return false;
    // Add comprehensive validation
    return true;
}

// 3. Use secure random generation
std::vector<uint8_t> generateSecureRandom(size_t bytes) {
    // Use cryptographically secure random number generation
    // Document entropy sources
}
```

### Cross-Platform Compatibility

```cpp
// 1. Platform-specific implementations
#ifdef _WIN32
    #include "windows/getopt_win.h"
    #ifdef USE_MINIMAL_SECP256K1
        #include "windows/minimal_secp256k1.h"
    #endif
#else
    #include <getopt.h>
    #include <secp256k1.h>
#endif

// 2. Consistent interfaces across platforms
class CrossPlatformWalletGenerator {
public:
    // Same interface regardless of platform
    WalletInfo generateWallet(const std::vector<uint8_t>& seed, 
                            const std::string& network);
};
```

## Testing Requirements

### Test Categories

#### 1. Unit Tests (Required for all changes)
```cpp
// tests/test_main.cpp additions
TEST_GROUP("Your Feature Name");

void testYourFeature() {
    // Arrange
    WalletGenerator generator;
    std::string testMnemonic = "abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about";
    
    // Act
    auto result = generator.yourNewFeature(testMnemonic);
    
    // Assert
    TEST_ASSERT(!result.empty(), "Feature should return non-empty result");
    TEST_ASSERT(result.isValid(), "Result should be valid");
}
```

#### 2. Security Tests (Required for crypto changes)
```cpp
// tests/security_test.cpp additions
void testYourSecurityFeature() {
    TEST_GROUP("Security: Your Feature");
    
    // Test randomness, determinism, isolation
    // Verify no sensitive data leakage
    // Validate cryptographic properties
}
```

#### 3. Integration Tests (Required for CLI changes)
```cpp
// tests/integration_test.cpp additions
void testYourCLIFeature() {
    // Test command-line interface
    // Verify error handling
    // Test edge cases
}
```

#### 4. Cross-Platform Tests (Required for platform changes)
```bash
# Test on multiple platforms
# Linux/macOS: automated testing
make test-all

# Windows: manual testing currently
.\run_tests.bat --all

# Document any platform-specific differences
```

### Performance Testing

```cpp
// tests/performance_test.cpp additions
void testYourPerformanceFeature() {
    auto start = std::chrono::high_resolution_clock::now();
    
    // Execute feature multiple times
    for (int i = 0; i < 1000; i++) {
        yourFeature();
    }
    
    auto duration = std::chrono::duration_cast<std::chrono::milliseconds>(
        std::chrono::high_resolution_clock::now() - start);
    
    TEST_ASSERT(duration.count() < 5000, "Feature should complete in reasonable time");
}
```

## Security Guidelines

### Critical Security Rules

1. **Never commit sensitive data**
   ```bash
   # ‚ùå NEVER do this
   git add private_key.txt
   git commit -m "Adding test key"  # NEVER!
   
   # ‚úÖ Use test vectors instead
   const std::string TEST_MNEMONIC = "abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about";
   ```

2. **Validate all cryptographic changes**
   ```cpp
   // Always include security tests for crypto functions
   void testCryptographicFunction() {
       // Test with known vectors
       // Verify deterministic behavior  
       // Check for proper randomness
       // Validate against standards
   }
   ```

3. **Document security implications**
   ```cpp
   /**
    * SECURITY NOTE: This function handles sensitive cryptographic material.
    * - Input validation is critical
    * - Memory should be cleared after use
    * - Function is not constant-time (timing attack risk)
    */
   std::vector<uint8_t> sensitiveFunction(const std::vector<uint8_t>& input);
   ```

### Security Review Checklist

For security-sensitive changes:

- [ ] **Cryptographic correctness** verified with test vectors
- [ ] **Memory handling** reviewed for sensitive data
- [ ] **Input validation** comprehensive and secure
- [ ] **Error handling** doesn't leak sensitive information
- [ ] **Timing attacks** considered and mitigated
- [ ] **Platform differences** analyzed for security impact
- [ ] **Documentation** updated with security considerations

## Platform-Specific Guidelines

### Linux/macOS Development

```bash
# Full development environment
make install-deps-ubuntu  # or install-deps-macos
make clean && make
make test-all

# Use all available tools
make static-analysis  # cppcheck
make memtest         # valgrind
make coverage        # lcov

# Debug with full tools
gdb ./wallet_generator
valgrind --leak-check=full ./wallet_generator
```

### Windows Development

```batch
# Follow Windows setup guide
scripts\install_windows_deps.ps1
scripts\build_windows.bat

# Test manually (automated suite planned)
.\run_tests.bat --all

# Debug with Visual Studio
devenv build\Debug\wallet_generator.exe
```

### Cross-Platform Considerations

- **File Paths**: Use platform-appropriate separators
- **Line Endings**: Configure Git for platform
- **Compiler Differences**: Test with GCC, Clang, MSVC
- **Library Availability**: Handle missing dependencies gracefully
- **Security Parity**: Ensure Windows implementation is as secure as possible

## Documentation Standards

### Code Documentation

```cpp
/**
 * @brief Generate cryptocurrency wallet from BIP39 seed
 * 
 * @param seed 64-byte BIP39 seed derived from mnemonic
 * @param network Network identifier (bitcoin, ethereum, etc.)
 * @param customPath Custom derivation path (optional)
 * 
 * @return WalletInfo containing private key, public key, and address
 * 
 * @throws std::runtime_error if network unsupported or seed invalid
 * 
 * @security This function handles sensitive cryptographic material.
 *           Ensure proper memory management and input validation.
 * 
 * @note Windows implementation uses minimal secp256k1 and may have
 *       different security characteristics than Linux/macOS.
 */
WalletInfo generateWallet(const std::vector<uint8_t>& seed,
                         const std::string& network,
                         const std::string& customPath = "");
```

### User Documentation

- **Clear examples** with expected outputs
- **Security warnings** prominently displayed
- **Platform-specific instructions** clearly separated
- **Troubleshooting sections** for common issues
- **Cross-references** to related documentation

### Commit Messages

```bash
# Format: type(scope): description
feat(windows): add minimal secp256k1 implementation
fix(security): resolve memory leak in key generation
docs(readme): update security warnings for RIPEMD160 fallback
test(integration): add cross-platform CLI validation
refactor(crypto): improve error handling in address generation

# Security commits
security(crypto): fix timing attack vulnerability in key derivation
security(docs): document RIPEMD160 fallback security implications
```

## Review Process

### Pull Request Requirements

1. **Title and Description**
   ```markdown
   # Title: Clear, descriptive summary
   feat(network): add support for Polygon network
   
   # Description: Detailed explanation
   ## Summary
   Adds support for Polygon network wallet generation following existing network patterns.
   
   ## Changes
   - Added Polygon network configuration
   - Updated network selection logic
   - Added integration tests
   - Updated documentation
   
   ## Testing
   - [x] Unit tests pass
   - [x] Integration tests pass  
   - [x] Manual testing on Linux/Windows
   - [x] Cross-validated addresses with MetaMask
   
   ## Security Considerations
   - Uses existing Ethereum-style address generation
   - No new cryptographic implementations
   - Tested with known address vectors
   ```

2. **Required Information**
   - **Breaking changes**: Clearly documented
   - **Security impact**: Analyzed and documented
   - **Platform testing**: Results from all platforms
   - **Performance impact**: Benchmarks if applicable

### Review Criteria

#### Functionality Review
- [ ] **Code correctness** and logic
- [ ] **Error handling** comprehensive
- [ ] **Edge cases** covered
- [ ] **Performance** acceptable
- [ ] **Documentation** complete and accurate

#### Security Review (for crypto changes)
- [ ] **Cryptographic correctness** verified
- [ ] **Known attack vectors** considered
- [ ] **Memory security** validated
- [ ] **Input validation** comprehensive
- [ ] **Security documentation** updated

#### Platform Review
- [ ] **Cross-platform compatibility** verified
- [ ] **Build system** works on all platforms
- [ ] **Testing** passes on target platforms
- [ ] **Documentation** platform-specific where needed

### Feedback and Iteration

1. **Address all review feedback**
2. **Update tests** based on reviewer suggestions
3. **Improve documentation** as needed
4. **Re-test** after changes
5. **Request re-review** when ready

## Recognition and Attribution

### Contributor Recognition

Contributors will be recognized in:
- **Release notes** for significant contributions
- **CHANGELOG.md** for notable features and fixes
- **README.md** acknowledgments section
- **Security hall of fame** for security contributions

### Attribution Guidelines

- **Major features**: Full attribution in release notes
- **Bug fixes**: Attribution in changelog
- **Security fixes**: Special recognition (with permission)
- **Documentation**: Contributor acknowledgment

## Getting Help

### Communication Channels

- **GitHub Issues**: General questions and bug reports
- **Pull Requests**: Code review and discussion
- **Security Issues**: Private email to security team
- **Documentation Issues**: GitHub issues with documentation label

### Resources

- **BIP39 Specification**: https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki
- **BIP44 Specification**: https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki
- **OpenSSL Documentation**: https://www.openssl.org/docs/
- **secp256k1 Library**: https://github.com/bitcoin-core/secp256k1

### Common Questions

**Q: How do I test my changes on multiple platforms?**
A: Use GitHub Actions CI/CD for automated testing, or request testing help from maintainers.

**Q: What if I find a security vulnerability?**
A: Report it privately following the [Security Policy](SECURITY.md). Do not create public issues.

**Q: Can I add support for a new cryptocurrency?**
A: Yes! Follow the existing network patterns and ensure proper testing and documentation.

**Q: How do I handle platform-specific code?**
A: Use conditional compilation with clear documentation of platform differences.

---

## Thank You

Thank you for contributing to the BIP39 Wallet Generator! Your contributions help make cryptocurrency wallet generation more accessible and secure for developers worldwide.

**Remember**: This project handles sensitive cryptographic material. Always prioritize security, test thoroughly, and follow best practices. When in doubt, ask for review and guidance.

For questions about contributing, please open an issue or reach out to the maintainers.